[gd_scene load_steps=4 format=3 uid="uid://cmux2dc14iiyr"]

[ext_resource type="PackedScene" path="res://addons/GameTemplate/GUI/Buttons/DefaultButton.tscn" id="1"]

[sub_resource type="GDScript" id="1"]
script/source = "extends CanvasLayer

var can_show: = false

@onready var resume: = find_child(\"Resume\")
@onready var restart: = find_child(\"Restart\")
@onready var options: = find_child(\"Options\")
@onready var mainmenu: = find_child(\"MainMenu\")
@onready var exit: = find_child(\"Exit\")

var MainMenu: = 'res://MainMenu/MainMenu.tscn'		# MainMenu scene when in levels

func _ready()->void:
	MenuEvent.PausedSignal = false
	
	#Localization
	SettingsLanguage.connect(\"ReTranslate\", Callable(self, \"retranslate\"))
	resume.connect(\"pressed\", Callable(self, \"_on_Resume_pressed\"))
	restart.connect(\"pressed\", Callable(self, \"_on_Restart_pressed\"))
	options.connect(\"pressed\", Callable(self, \"_on_Options_pressed\"))
	mainmenu.connect(\"pressed\", Callable(self, \"_on_MainMenu_pressed\"))
	exit.connect(\"pressed\", Callable(self, \"_on_Exit_pressed\"))
	retranslate()
	

func show_menu(value:bool)->void:
	if !can_show:
		return
	MenuEvent.PausedSignal = value
	$Control.visible = value
	if value:
		get_tree().get_nodes_in_group(\"Pause\")[0].grab_focus()


func _on_Resume_pressed()->void:
	Game.emit_signal(\"Resume\")
	show_menu(false)

func _on_Restart_pressed()->void:
	Game.emit_signal(\"Restart\")
	show_menu(false)

func _on_Options_pressed()->void:
	MenuEvent.Options = true

func _on_MainMenu_pressed()->void:
	Game.emit_signal(\"ChangeScene\", MainMenu)
	show_menu(false)
	PauseMenu.can_show = false

func _on_Exit_pressed()->void:
	Game.emit_signal(\"Exit\")

func retranslate()->void:
	resume.text = tr(\"RESUME\")
	restart.text = tr(\"RESTART\")
	options.text = tr(\"OPTIONS\")
	mainmenu.text = tr(\"MAIN_MENU\")
	exit.text = tr(\"EXIT\")
"

[sub_resource type="StyleBoxFlat" id="2"]
bg_color = Color(0.247059, 0.156863, 0.196078, 1)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0.407843, 0.219608, 0.423529, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
corner_detail = 1
anti_aliasing = false

[node name="PauseMenu" type="CanvasLayer"]
process_mode = 3
layer = 19
script = SubResource("1")

[node name="Control" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0

[node name="MarginContainer" type="MarginContainer" parent="Control"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 60
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 60
theme_override_constants/margin_bottom = 30

[node name="Panel" type="Panel" parent="Control/MarginContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("2")

[node name="MarginContainer" type="MarginContainer" parent="Control/MarginContainer/Panel"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="VBoxContainer" type="VBoxContainer" parent="Control/MarginContainer/Panel/MarginContainer"]
layout_mode = 2
size_flags_vertical = 4
theme_override_constants/separation = 1

[node name="Resume" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" groups=["Pause"] instance=ExtResource("1")]
layout_mode = 2
text = "Resume"

[node name="Restart" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
layout_mode = 2
text = "Restart"

[node name="Options" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
layout_mode = 2
text = "Options"

[node name="MainMenu" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
layout_mode = 2
text = "Main Menu"

[node name="Exit" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
layout_mode = 2
text = "Exit"
